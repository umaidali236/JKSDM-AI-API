<style>
    *{
  
  margin:0;
  padding:0;
  outline:none;
  text-decoration:none;
  list-style:none;
  font-family: 'Mulish', sans-serif;
  
}

body{
  
  padding-top:50px;
  justify-content:center;
  background:#dee5ed;
  /*transform:scale(0.8) translateY(-50px);*/
  
  
}

.cardTop{
  
  height:284px;
  background: #FAC24F;
  border-radius: 20px;
  overflow:hidden;
  
  h3{
    font-family: Open Sans;
font-style: normal;
font-weight: bold;
font-size: 22px;
line-height: 30px;
color: #FFFFFF;
    margin-left:66px;
    margin-top:40px;



  }
  
  label{
    
        font-family: Open Sans;
    font-style: normal;
    font-weight: normal;
    font-size: 16px;
    line-height: 30px;
    /* identical to box height */
    margin-left:66px;
    margin-top:10px;
    margin-bottom:10px;
    color: #000000;

  }

}


.timeline{
  
  width:90%;
  height:100%;
  background: #ECF1F524;
  mix-blend-mode: normal;
  overflow-y:scroll;
  scrollbar-width: none; 
position:absolute;
top:135px;
margin: 10px auto;
box-shadow: 0px 20px 53px -30px rgba(95, 102, 173, 0.566816);
border-radius: 10px;

  
  
  h3{
    font-family: Open Sans;
font-style: normal;
font-weight: bold;
font-size: 22px;
line-height: 30px;
color: #FFFFFF;
    margin-left:66px;
    margin-top:40px;



  }
  
  label{
    
    font-family: Open Sans;
font-style: normal;
font-weight: normal;
font-size: 16px;
line-height: 22px;
/* identical to box height */
margin-left:66px;
margin-top:10px;

color: #000000;

  }
  
  .box{
    width:100%;
    height:100%;
    background:#dee5ed; /*#fbfcfd;*/
    
    margin-top:99.5px;
    
    
    .container{
      
      width:97%;
      height:100%;
      
      margin:0 auto;
      .lines{

        margin-left:50%;
        margin-top:-15px;
        
        .dot{
          width:20px;
          height:20px;
          background: #9f0707;/* #D1D6E6;*/
          border-radius:10px;
        }
        
        .line{
          height:75px;
          width:6px;
          background: #373838; /* #076e9f; #D1D6E6;*/
          margin-left:7.5px;
          margin-top:-2px;
        }
      }
      .cards{
        .entryy{
        margin-left:12px;
        transform:translateY(-50px);
        width:100%;
        .card{
          width:95%;
          min-height:110px;
          padding-top:25px;
          padding-bottom:25px;
          background: #FFFFFF;
          box-shadow:0 2px 2px 0  #eeeeee40;
          border-radius: 10px;
          
          box-shadow: 0px 16px 15px -10px rgba(105, 96, 215, 0.0944602);
          margin: 0 auto;
          margin-bottom:10px;
          
          &.mid{
            height:71px;
          }
          
          h4{
            
            font-family: Open Sans;
            font-style: normal;
            font-weight: bold;
            font-size: 14px;
            line-height: 19px;
            margin-left:25px;
            margin-bottom:5px;
            color: #2B2862;

          }
          h2{
            
            font-family: Open Sans;
            font-style: normal;
            font-weight: bold;
            font-size: 20px;
            line-height: 22px;
            margin-left:10px;
            margin-bottom:10px;
            color: #103087;

          }
          p#desc{
            
            font-family: Open Sans;
            font-style: normal;
            font-weight: normal;
            font-size: 18px;
            line-height: 22px;
            color: #2B2862;
            margin-left:10px;
            margin-bottom:20px;
            padding:10px;
          }
          
          p{
            
            font-family: Open Sans;
            font-style: normal;
            font-weight: normal;
            font-size: 16px;
            line-height: 22px;
            color: #2B2862;
            margin-left:25px;
          }
         
          .button-container {
            display: flex;
            justify-content: space-around;
            gap: 10px; /* Add space between buttons */
            overflow-x: scroll;
            scrollbar-width: none; 
            overflow-y: hidden;
            max-width: 100vw;
            scroll-behavior: smooth; 
            
        }
        
          .button-container .btn{
                
                min-width:200px;
                height:80px;
                mix-blend-mode: normal;
                cursor:pointer;
                border: 1px solid #2d41c0;
                border-radius: 5px;
                display:flex;
                align-items:center;
                justify-content:center;
                font-family: Open Sans;
                font-style: normal;
                font-weight: bold;
                font-size: 20px;
                line-height: 25px;
                transition:0.s;
                background:#0d5aa8;
                color:#fff;
                border-color:#2d41c0;
                padding-left:10px;
                padding-right:10px;
                flex: 0 0 auto; 

                &:focus{
                  outline:none;
                }
                &:active{
                  outline:none;
                }
        }
      }

        }
      }
    
    }
    
    .bottom{
      width:100%;
      height:107px;
        background:#fff;
      box-shadow:0 0 2px #eeeeee50;
      padding-top:45px;
      

    }
  }
  

  .box{
      .cards2{
        .entryy2{
        margin-left:12px;
        transform:translateY(-50px);
        width:100%;
        .card2{
          
          width:95%;
          min-height:110px;
          padding-top:25px;
          padding-bottom:25px;
          background: #FFFFFF;
          box-shadow:0 2px 2px 0  #eeeeee40;
          border-radius: 10px;
          
          box-shadow: 0px 16px 15px -10px rgba(105, 96, 215, 0.0944602);
          margin: 0 auto;
          margin-bottom:10px;
          
          &.mid{
            height:71px;
          }
          
          h4{
            
            font-family: Open Sans;
            font-style: normal;
            font-weight: bold;
            font-size: 14px;
            line-height: 19px;
            margin-left:25px;
            margin-bottom:5px;
            color: #111010;

          }
          h2{
            
            font-family: Open Sans;
            font-style: normal;
            font-weight: bold;
            font-size: 20px;
            line-height: 22px;
            margin-left:10px;
            margin-bottom:10px;
            color: #103087;

          }
          p#desc{
            
            font-family: Open Sans;
            font-style: normal;
            font-weight: normal;
            font-size: 18px;
            line-height: 22px;
            color: #2B2862;
            margin-left:10px;
            margin-bottom:20px;
            padding:10px;
          }
          
          p{
            
            font-family: Open Sans;
            font-style: normal;
            font-weight: normal;
            font-size: 16px;
            line-height: 22px;
            color: #2B2862;
            margin-left:25px;
          }
         
          .button-container2 {
            display: flex;
            justify-content: space-around;
            gap: 10px; /* Add space between buttons */
            overflow-x: scroll;
            scrollbar-width: none; 
            overflow-y: hidden;
            max-width: 100vw;
            scroll-behavior: smooth; 
            
        }
        
          .button-container2 .btn2{
                
                min-width:200px;
                height:80px;
                mix-blend-mode: normal;
                cursor:pointer;
                border: 1px solid #2d41c0;
                border-radius: 5px;
                display:flex;
                align-items:center;
                justify-content:center;
                font-family: Open Sans;
                font-style: normal;
                font-weight: bold;
                font-size: 20px;
                line-height: 25px;
                transition:0.s;
                background:#0d5aa8;
                color:#fff;
                border-color:#2d41c0;
                padding-left:10px;
                padding-right:10px;
                flex: 0 0 auto; 

                &:focus{
                  outline:none;
                }
                &:active{
                  outline:none;
                }
        }
      }
        }
      }
    
    }
    
    .bottom{
      width:100%;
      height:107px;
        background:#fff;
      box-shadow:0 0 2px #eeeeee50;
      padding-top:45px;
      

    }
  }
.button-container3{
  /* display: flex;
  gap:20px ; */
  /* margin-left: 10px; */
  /* align-items: center;
  text-align: center;*/
   
  display: flex;
            justify-content: space-around;
            gap: 10px; 
            overflow-x: auto;
            scrollbar-width: none; 
            overflow-y: hidden;
            max-width: 100vw;
            scroll-behavior: smooth; 
}.btn3{
   
  
  flex-direction: column;
  display: flex; 
   align-items: center;
  justify-content: center;
  padding: 10px;
  display: block; 
  background: #fff;
  border: 1px solid #ddd;
  border-radius: 8px;
  
  width: 100%;
  max-width: 300px; 
  text-align: center;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  text-decoration: none; 
  transition: transform 0.3s, box-shadow 0.3s;
   margin-left: 10px;
   
  }
  .btn3 h4{
    color: #0d5aa8;
  }


.externalbtn{
                
                max-width:200px;
                height:18px;
                mix-blend-mode: normal;
                cursor:pointer;
                border: 1px solid #30af02b9;
                border-radius: 5px;
                font-family: Open Sans;
                font-style: normal;
                font-weight: bold;
                font-size: 12px;
                line-height: 16px;
                transition:0.s;
                background:#30af02b9;
                color:#fff;
                border-color:#30af02b9;
                padding:10px;
                margin-left:10px;
                &:hover{
                transform:scale(1.01);
                background:#30af02b9;
                padding-left:10px;
                padding-right:10px;
                
                }
        }
  
  
        .card{
          width:95%;
          min-height:110px;
          padding-top:25px;
          padding-bottom:25px;
          padding-left:25px;
          padding-right:25px;
          background: #FFFFFF;
          box-shadow:0 2px 2px 0  #eeeeee40;
          border-radius: 10px;
          
          box-shadow: 0px 16px 15px -10px rgba(105, 96, 215, 0.0944602);
          margin: 0 auto;
          margin-bottom:10px;
          
          &.mid{
            height:71px;
          }

          
          h4{
            
            font-family: Open Sans;
            font-style: normal;
            font-weight: bold;
            font-size: 14px;
            line-height: 19px;
            margin-left:25px;
            margin-bottom:5px;
            color: #2B2862;

          }
          h2{
            
            font-family: Open Sans;
            font-style: normal;
            font-weight: bold;
            font-size: 20px;
            line-height: 22px;
            margin-left:10px;
            margin-bottom:10px;
            color: #103087;

          }
          p#desc{
            
            font-family: Open Sans;
            font-style: normal;
            font-weight: normal;
            font-size: 18px;
            line-height: 22px;
            color: #2B2862;
            margin-left:10px;
            margin-bottom:20px;
            padding:10px;
          }
          
          p{
            
            font-family: Open Sans;
            font-style: normal;
            font-weight: normal;
            font-size: 16px;
            line-height: 22px;
            color: #2B2862;
            margin-left:25px;
          }
        }

</style>





<div class="main" style="width:90%; margin:10 auto;">
  
    <div class="cardTop" style="width:100%;">
        <h3 style="font-size: 34px; color:black;">Explore Career Options</h3><br>
        <label>Choose among the options below</label>
      <!--<svg height="219" viewBox="0 0 497 219" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M-38.5 196C-38.5 196 34 91 133.5 91C233 91 427 159 532.5 30C638 -99 518 236 518 236L-49 246.5L-38.5 196Z" fill="#FF768E"/>
  </svg>-->
      
      
    
    </div>
    
    
      <div class="timeline">
        <h3 style="font-size: 34px; color:black;">&nbsp; </h3>
        <label>&nbsp;</label>
        
        
        <div class="box">
          
          <div class="container">
            <div id="careerscards" class="cards">
                    <div id="entry-1" class="entryy">
                        <div class="card">
                            <h4> </h4>
                            <div class="button-container">
                                <div class="btn" onclick="getCareer('10th','course', 1, this)">Completed 10th</div>
                                
                            </div>
                        </div>
                    </div>
                  </div>
            
                    
            </div>
            
            
            
          </div>
          
          
          
          

        </div>
        
        
      </div>
  </div>
<script>


function getRecommendedCourses(x,y) {
    var xhr = new XMLHttpRequest();
    var url = "http://127.0.0.1:5000/api/v1/RecommendCoursesBasedOnCareerChosen";
    var params = "career_name="+x+"&sector_name="+y;
  
    xhr.open("GET", url +"?"+params);
    xhr.setRequestHeader('Content-Type', 'application/json');
    
    xhr.timeout = 5000;

    xhr.ontimeout = function() {
      displayRecommended(xhr.status, xhr.responseText);
    };
    error = 1
    // Set the onload callback function
    xhr.onload = function () {
        if (xhr.status == 200) {
            displayRecommended(xhr.status, xhr.responseText);
        } 
        else 
        {
          displayRecommended(xhr.status, xhr.responseText,);
        }
    };

    
    // Send the request
    xhr.send();
}


function displayRecommended(responseStatus, responseText)
{
  responseDictCareerOptions = JSON.parse(responseText)
  if (responseStatus != 200) //error has occured during fetching
  {
      alert('Error occurred! Try again. Error Code:'+responseStatus+ '. Error Details:'+responseText);
      return;
  }

  else{
      textRecommended = "<div id=entry class=entryy2>";
      textRecommended += "<div class=card2><h4> SS</h4><div class=button-container>";

  }
}

</script>


<script>
CURRENT_CAREER_LEVEL = 1;
prev = 0;
function getCareer(x,y,z, who) {

    var xhr = new XMLHttpRequest();
    var url = "http://127.0.0.1:5000/api/v1/ExploreCareerOptions";
    var params = "qualification="+x+"&course_type="+y;
  
    xhr.open("GET", url +"?"+params);
    xhr.setRequestHeader('Content-Type', 'application/json');
    
    xhr.timeout = 5000;

    xhr.ontimeout = function() {
        displayOptions(xhr.status, xhr.responseText,z, who);
    };
    error = 1
    // Set the onload callback function
    xhr.onload = function () {
        if (xhr.status == 200) {
            displayOptions(xhr.status, xhr.responseText,z, who);
        } 
        else 
        {
            displayOptions(xhr.status, xhr.responseText,z, who);
        }
    };

    
    // Send the request
    xhr.send();
}

function displayOptions(responseStatus, responseText, z, who)
{
  responseDictCareerOptions = JSON.parse(responseText)
  if (responseStatus != 200) //error has occured during fetching
  {
      alert('Error occurred! Try again. Error Code:'+responseStatus+ '. Error Details:'+responseText);
      return;
  }

  else{
    const siblingDivs = Array.from(who.parentElement.children);

    // Loop through all siblings and change background color except the targetDiv itself
    siblingDivs.forEach(div => {
      //alert(div.tagName)
      
    if (div.tagName.toLowerCase() === "div") {
      //alert('hi');
        div.style.background = "#0d5aa8"; // Change background color
    }
});



    who.style.background='#58a80d';
    zz = z+1;
    const parentDiv = document.getElementById("careerscards");
    const directChildDivs = parentDiv.querySelectorAll(":scope > div");
    Array.from(directChildDivs).slice(zz-1).forEach(div => {
        parentDiv.removeChild(div);
    });
  

    
    if(responseDictCareerOptions.message.node_placement == "non-leaf")
    {
      textNextCareer = "<div id=entry-"+zz+" class=entryy><div class=lines><div class=dot></div><div class=line></div></div>";
      textNextCareer += "<div class=card><h4> </h4><div class=button-container>";
      for (child in responseDictCareerOptions.message.children){
        child_name = responseDictCareerOptions.message.children[child].child_name;
        child_type = responseDictCareerOptions.message.children[child].child_type;
        textNextCareer += "<div class=btn onclick=getCareer('"+encodeURIComponent(child_name)+"','"+child_type+"',"+zz+",this)>"+child_name+"</div>";
      }
      textNextCareer += "</div></div></div>";

      tempDiv = document.createElement('div');
      tempDiv.innerHTML = textNextCareer;
      document.getElementById('careerscards').appendChild(tempDiv);
    }
    else
    {
      if (responseDictCareerOptions.message.course_type=='course')
       {
          textNextCareer = "<div id=entry-"+zz+"><div class=lines><div class=dot></div><div class=line></div></div>";
          textNextCareer += "<div class=card style='border:2px solid #000;'>";
          course_description =  responseDictCareerOptions.message.description;
          course_duration = responseDictCareerOptions.message.duration;
          offline_colleges = responseDictCareerOptions.message.offline;
          textNextCareer += "<h2>Course Description</h2><p id=desc>"+course_description+"</p>";
          textNextCareer += "<h2>Course Duration</h2><p id=desc>"+course_duration+"</p>";
          textNextCareer += "<h2>Offline Course</h2><p id=desc>The course can be pursues in the following indicative institutions:<br>"+offline_colleges+"</p>";
          textNextCareer += "</div></div><span style=margin:30px;>&nbsp;</span";
          tempDiv = document.createElement('div');
          tempDiv.innerHTML = textNextCareer;
          document.getElementById('careerscards').appendChild(tempDiv);
          //document.getElementById('careerscards').appendChild(textNextCareer);
        }
        if (responseDictCareerOptions.message.course_type=='ncscourse')
        {
          textNextCareer = "<div id=entry-"+zz+"><div class=lines><div class=dot></div><div class=line></div></div>";
          textNextCareer += "<div class=card style='border:2px solid #000;'>";
          course_description =  responseDictCareerOptions.message.description;
          course_details = responseDictCareerOptions.message.details
          //course_duration = responseDictCareerOptions.message.duration;
          //offline_colleges = responseDictCareerOptions.message.offline;
          textNextCareer += "<h2>Course Description</h2><p id=desc>"+course_description+"</p>";
          //textNextCareer += "<h2>Course Duration</h2><p id=desc>"+course_duration+"</p>";
          if (responseDictCareerOptions.message.details.personalCompetencies !== "nan")
          textNextCareer += "<h2>Personal Competencies</h2><p id=desc>"+responseDictCareerOptions.message.details.personalCompetencies+"</p>";
          if (responseDictCareerOptions.message.offline !== "nan")
          textNextCareer += "<h2>Institutions where you can study</h2><p id=desc>The course can be pursues in the following indicative institutions:<br>"+responseDictCareerOptions.message.offline+"</p>";
          if (responseDictCareerOptions.message.details.fees !== "nan")
              textNextCareer += "<h2>Fees</h2><p id=desc>"+responseDictCareerOptions.message.details.fees+"</p>";
          if ( responseDictCareerOptions.message.details.scholarshipsAndLoans !== "nan")
          textNextCareer += "<h2>Scholarships & Loans</h2><p id=desc>"+responseDictCareerOptions.message.details.scholarshipsAndLoans+"</p>";
          if ( responseDictCareerOptions.message.details.expectedGrowthPath !== "nan")
          textNextCareer += "<h2>Expected Growth Path</h2><p id=desc>"+responseDictCareerOptions.message.details.expectedGrowthPath+"</p>";
          if (responseDictCareerOptions.message.details.whereToWork !== "nan")
          textNextCareer += "<h2>Where will you work:</h2><p id=desc>"+responseDictCareerOptions.message.details.whereToWork+"</p>";
          if (responseDictCareerOptions.message.details.expectedIncome !== "nan")
          textNextCareer += "<h2>Expected Income</h2><p id=desc>"+responseDictCareerOptions.message.details.expectedIncome+"</p>";
          if (responseDictCareerOptions.message.details.externalLink != "nan"){
            textNextCareer += "<a href="+responseDictCareerOptions.message.details.externalLink+"><div class=externalBtn>Click here to know more</div></a>";
          }

    
          textNextCareer += "</div></div><span style=margin:30px;>&nbsp;</span";

          tempDiv = document.createElement('div');
          tempDiv.innerHTML = textNextCareer;
          document.getElementById('careerscards').appendChild(tempDiv);
          //document.getElementById('careerscards').innerHTML += textNextCareer;
          
        }   

    }
    
                                  
  }
}


function getRecommended(x, y) {
    var xhr = new XMLHttpRequest();
    var url = "http://127.0.0.1:5000/api/v1/RecommendCoursesBasedOnCareerChosen";
    var params = "career_name=" + encodeURIComponent(x) + "sector_name=" + encodeURIComponent(y);
    xhr.open("GET", url + "?" + params);
    xhr.setRequestHeader('Content-Type', 'application/json');
    
    xhr.timeout = 5000;

    xhr.ontimeout = function() {
        console.error('Request timed out');
        displayRec(xhr.status, xhr.responseText);
    };

    // Set the onload callback function
    xhr.onload = function () {
        if (xhr.status == 200) {
            displayRec(xhr.status, xhr.responseText);
        } else {
            console.error('Error response:', xhr.status, xhr.responseText);
            displayRec(xhr.status, xhr.responseText);
        }
    };

    // Send the request
    xhr.send();
}

function displayRec(responseStatus, responseText) {
    var responseDictCareerRec;
    try {
        responseDictCareerRec = JSON.parse(responseText);
        
    } catch (e) {
        console.error('Failed to parse response:', responseText);
        return;
    }

    if (responseStatus != 200) { // Error has occurred during fetching
        alert('Error occurred! Try again. Error Code:' + responseStatus + '. Error Details:' + responseText);
        return;
    }
    
    // const parentDiv = document.getElementById("careerscards2");
    // const directChildDivs = parentDiv.querySelectorAll(":scope > div");
    // Array.from(directChildDivs).forEach(div => {
    //   parentDiv.removeChild(div);
    // });
    
    // // Clear existing child elements
    const parentDiv = document.getElementById("careerscards2");
    parentDiv.innerHTML = '';
    console.log(responseDictCareerRec);
    if (responseDictCareerRec.sector_recommended) {
        // Example default values
        const ThumbnailUrl = 'https://images.unsplash.com/photo-1542039375-28138150cc31?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OHx8dGh1bWJuYWlsJTIwY29tcHV0ZXJ8ZW58MHx8MHx8fDA%3D';
        const LinkHref = '#';
        // const LinkText = 'Click Here';
        const cardDiv1=document.createElement('div');
            cardDiv1.id='entry-x';
            cardDiv1.className='entryy2';
             // Create the HTML structure for each card
             const cardDiv = document.createElement('div');
            cardDiv.className = 'card2';
            const linkDiv = document.createElement('div');
            linkDiv.className = 'button-container3';
        // Create a new card for each recommended course
        responseDictCareerRec.sector_recommended.forEach(course => {
            const name = course; // Assuming each entry is just a name string

           // Add thumbnail image
            const img = document.createElement('img');
            img.src = ThumbnailUrl; // Use default thumbnail URL
            img.alt = `${name}'s thumbnail`;
            img.style.width = '300px'; // Set width
            img.style.height = '150px'; // Set height
            img.style.objectFit = 'cover'; // Fit the image properly
            
            // Add the name
            const nameDiv = document.createElement('h4');
            nameDiv.textContent = name; // Set the name
           
            // Add the link
           const link = document.createElement('a');
            link.href = LinkHref; 
            // link.textContent = LinkText; // Use default link text
            link.className = 'btn3'; 
            link.appendChild(img)
            link.appendChild(nameDiv)
            linkDiv.appendChild(link);
            cardDiv.appendChild(linkDiv)
            cardDiv1.appendChild(cardDiv)
            parentDiv.appendChild(cardDiv1);
            
            
        });
      }}
  
    
//     console.log(responseDictCareerRec)
//     if (responseDictCareerRec.sector_recommended) {
//        responseDictCareerRec.sector_recommended.forEach(sector=>{
        
//         let textNextCareer = "<div id=entry-x class=entryy2>";
//         textNextCareer += "<div class=card2><h4>"+sector+"</h4><div class=button-container2>";
//         textNextCareer += "<div class=btn2>" + sector + "</div>";
//         textNextCareer += "</div></div></div>";
//         parentDiv.innerHTML += textNextCareer;});
//     }
// }

</script>